\documentclass{beamer}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{amssymb}

\usepackage{fontspec}
% switch to a monospace font supporting more Unicode characters
\setmonofont{FreeMono}
\usepackage{minted}
\newmintinline[lean]{lean4}{bgcolor=white}
\newminted[leancode]{lean4}{fontsize=\footnotesize}
\usemintedstyle{tango}  % a nice, colorful theme

% Theme
\usetheme{Madrid}

% Title page
\title{Convergence of the nth Root of n in Lean}
\author{Sophie Weber, David Leeb}
\date{16.07.2024}

\makeatletter
\newenvironment<>{proofs}[1][\proofname]{
    \par
    \def\insertproofname{#1\@addpunct{.}}
    \usebeamertemplate{proof begin}#2}
  {\usebeamertemplate{proof end}}
\makeatother

\begin{document}
\begin{frame}
    \titlepage
\end{frame}

\begin{frame}[fragile]{Definitions}
    % Your content for the introduction section goes here
    \begin{definition}
        The sequence $(a_n)$ converges to $x$ if for every $\epsilon > 0$ there exists an $N \in \mathbb{N}$ such that for all $n \geq N$ we have $|a_n - x| < \epsilon$.
    \end{definition}
    
    \begin{block}{Lean Code}
        \begin{leancode}
        def ConvergesTo (a : ℕ → ℝ) (x : ℝ) : Prop :=
        ∀ ε > 0, ∃ (n : ℕ), ∀ m ≥ n, |a m - x| < ε
    \end{leancode}
    \end{block}
\end{frame}

\begin{frame}[fragile]{Lemmas}
    % Your content for the lemmas section goes here
    \begin{lemma}[Convergence of a Constant Sequence]
        Let $(a_n)$ be a constant sequence with $a_n = x$ for all $n$. Then $(a_n)$ converges to $x$.
    \end{lemma}

    \begin{block}{Lean Code}
    \begin{leancode}
    theorem of_constant (x : ℝ) : ConvergesTo (fun _ ↦ x) x
    \end{leancode}
    \end{block}
\end{frame}

\begin{frame}[fragile]{Lemmas}
    \begin{lemma}[Sandwich Theorem]
        If $(a_n)$, $(b_n)$ and $(c_n)$ are sequences and there exists an $N \in \mathbb{N}$ such that $a_m \leq b_m \leq c_m$ for all $m \geq N$, and both $(a_n)$ and $(c_n)$ converge to $x$, then $(b_n)$ converges to $x$.
    \end{lemma}

    \begin{block}{Lean Code}
    \begin{leancode}
    theorem sandwich (a b c : ℕ → ℝ) 
    (h : ∃ (n : ℕ), ∀ m ≥ n , a m ≤ b m ∧ b m ≤ c m) (x : ℝ)
    (ha : ConvergesTo a x) (hb : ConvergesTo c x) :
    ConvergesTo b x
    \end{leancode}
    \end{block}
\end{frame}



\begin{frame}{Math Proof}
    % Your content for the math proof section goes here
    \begin{block}{Example}
        The sequence $(a_n)$ defined by $a_n = \sqrt[n]{n}$ converges to 1.
    \end{block}
    \begin{proofs}
        Let $(a_n)$ be the sequence defined by $a_n = \sqrt[n]{n}$.\\
        \ \\Remember: Sandwich Theorem\\
        We need to find two sequences $(b_n)$ and $(c_n)$ such that $b_m \leq a_m \leq c_m$ for all $m \geq n$, and both $(b_n)$ and $(c_n)$ converge to 1.\\
    \end{proofs}
\end{frame}

\begin{frame}{Math Proof}
    \begin{proofs}
        Note that for any positive integer $n \geq 1$, we have $1 \leq \sqrt[n]{n}$. This follows from: 
        \begin{align*}
            1 &\leq n \\
            \Leftrightarrow 1^n &\leq \sqrt[n]{n}^n \\
            \Leftrightarrow 1 &\leq \sqrt[n]{n}
        \end{align*}
        From that, we can see, that the sequence $(b_n)$ can be defined by the constant sequence $b_n = 1$ for all $n$.\\
        From the inequality $ 1 \leq \sqrt[n]{n}$ we can also derive the equality
        \begin{align*}
            1 + d_n = \sqrt[n]{n}
        \end{align*}
        for a suitable sequence $(d_n)$.\\
    \end{proofs}
\end{frame}
\begin{frame}{Math Proof}
    \begin{proofs}
        To find the second sequence $(c_n)$, we want to show that $\sqrt[n]{n} \leq 1 + \frac{2}{\sqrt{n}}$. For $n \geq 2$ this follows from:
        \begin{align*}
            n = \sqrt[n]{n}^n & = (1 + d_n)^n \\
            & = \sum_{k=0}^{n} \binom{n}{k} \cdot d_n^k \\
            & \geq \binom{n}{2} \cdot d_n^2 \\
            & = \frac{n!}{(n-2)! \cdot 2!} \cdot d_n^2 \\
            & = \frac{n \cdot (n-1)}{2} \cdot d_n^2
        \end{align*} 
    \end{proofs}
\end{frame}

\begin{frame}{Math Proof}
    \begin{proofs}
        What we have so far:
        \begin{align*}
            n & \geq \frac{n \cdot (n-1)}{2} \cdot d_n^2
        \end{align*} 
        From that we can derive:
        \begin{align*}
            \Leftrightarrow d_n^2 & \leq \frac{2}{n-1} \\
            \Leftrightarrow d_n & \leq \sqrt{\frac{2}{n-1}}
        \end{align*} 
        Now, we can conclude:
        \begin{align*}
            \sqrt[n]{n} = 1 + d_n & \leq 1 + \sqrt{\frac{2}{n-1}}
        \end{align*}

    \end{proofs}
\end{frame}


\begin{frame}{Math Proof}
    \begin{proofs}
        Now we have the sequences $(b_n)$ and $(c_n)$:
        \begin{align*}
            b_n & = 1 \\
            c_n & = 1 + \sqrt{\frac{2}{n-1}}
        \end{align*}
        We still have to show, that both sequences converge to 1, which is easy to see:
        \[
        \lim_{n \to \infty} 1 = 1
        \]
        \[
        \lim_{n \to \infty} (1 + \sqrt{\frac{2}{n-1}}) = 1
        \]
    \end{proofs}

\end{frame}

\begin{frame}{Math Proof}
    \begin{proof}
        Using what we have previously shown, we have:
        \begin{align*}
            1 \leq \sqrt[n]{n} \leq 1 + \sqrt{\frac{2}{n-1}}
        \end{align*}
        for all $n \geq 2$ and we know that both sequences converge to 1.\\
        We can now apply the Sandwich Theorem to conclude that $\lim_{n \to \infty} \sqrt[n]{n} = 1$.
    \end{proof}

\end{frame}

\begin{frame}{Proof in Lean}
    % Your content for the proof in Lean section goes here
\end{frame}

\end{document}